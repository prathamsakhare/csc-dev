<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./users.css" />
    <script src="./index.js" defer></script>
    <script src="./indexeddb.js" defer></script>
    <script src="./users.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/introjs.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />
    <title>CSC PMS</title>
  </head>
  <body>
    <header>
      <h1 id="logo">CSC<span>PMS</span></h1>
      <div>
        <a href="./index.html"
        ><button id="profile-button" class="main-button intro-btn">Intro!</button></a
      >
      <a href="./intro.html"
        ><button id="profile-button" class="main-button records-btn">Records</button></a
      >
      </div>
    </header>

    <div id="overlay" class="overlay"></div>
    <div id="modal" class="modal">
      <div class="modal-heading">
        <h2>Add User</h2>
        <button
          id="modal-close-btn"
          class="close secondary-button"
          onclick="closeModal()"
        >
          Close
        </button>
      </div>
      <!-- Add User Modal -->
      <form id="userInputForm">
        <div class="modal-body">
          <!-- <div class="modal-name"> -->
          <div class="wrapper">
            <input
              type="text"
              id="username"
              class="modal-input"
              placeholder="Enter customer's name..."
            />
            <div id="modal-name-dropdown" class="modal-name-dropdown">
              <div>
                <div id="namelist" class="name-display"></div>
                <!-- <button class="add-user-btn" onclick="openAddUserModal()">
                  + Add '<span id="name-suggest"></span>'
                </button> -->
              </div>
            </div>
          </div>
          <input
            name="usermail"
            id="useremail"
            type="email"
            class="modal-input"
            placeholder="Enter Email Address..."
          ></input>
          <input
            name="usernumber"
            type="number"
            id="usernumber"
            class="modal-input"
            placeholder="Enter Phone Number..."
          ></input>
          <!-- <div class="cat-amt-collection">
            <select
              name="category"
              id="category"
              class="select-input cat-amt-select"
            >
              <option value="select">Select Category</option>
              <option value="Adhar Card">Adhar Card</option>
              <option value="Shram Card">Shram Card</option>
              <option value="PMKCY">PMKCY</option>
              <option value="Mudra Yoajana">Mudra Yojana</option>
            </select>
            <input
              type="number"
              id="amt"
              class="select-input amt"
              placeholder="Enter amount recieved..."
            />
          </div> -->
          <button
            id="modal-save-btn"
            class="main-button"
            onclick="getUserFormValues()"
          >
            Save User
          </button>
        </div>
      </form>
      <!-- Add User Modal -->
      <form id="userInputForm">
        <div class="addUserModal-body" id="addUserModal">
          <!-- <div class="modal-name"> -->
          <div class="add-user-modal-heading"><h2 class="add-user-heading">Add User</h2>
            <button
              id="modal-close-btn"
              class="close secondary-button"
              onclick="closeAddUserModal()"
            >
              Close
            </button></div>
          <div class="wrapper">
            <input
              type="text"
              id="username"
              name="username"
              class="addUserModal-input"
              placeholder="Enter customer's name..."
            />
            <input
              type="email"
              id="useremail"
              name="useremail"
              class="addUserModal-input"
              placeholder="Enter email..."
            />
            <input
              type="number"
              id="usernumber"
              name="usernumber"
              class="addUserModal-input"
              placeholder="Enter phone number..."
            />
          </div>

          <button
            id="addUserModal-save-btn"
            onclick="getUserFormValues()"
            class="main-button"
          >
            Save User
          </button>
        </div>
      </form>
    </div>

    <main>
      <div id="users-topbar">
        <h2>Users</h2>

        <!-- Button to download Users table into a .xlsx file -->
        <div>
          <button
          id="download-users-table-button" class="main-button" style="background-color: #008000;"
          onclick="exportTableToExcel('users-table', 'users')"
        >
          Export<i class="fa-regular fa-file-excel" style="padding-left: 5px;"></i>
        </button>
        <!-- Button to add user  -->
        <button
          id="users-add-button"
          class="main-button"
          onclick="openModal()"
        >
          Add User
        </button>
        </div>
      </div>
      <table id="users-table">
        <tbody id="users">
          <tr>
            <th>Index</th>
            <th>Name</th>
            <th>Mobile No.</th>
            <th>Email</th>
            <th>Date</th>
          </tr>
        </tbody>
      </table>
      <div id="pagination"></div>
      <div id="no-users">
        <h1>No Users!</h1>
        <p>Please click on 'Add User' button to add an user.</p>
      </div>
    </main>

   
  </body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/intro.min.js"></script>
  <script>
    //GUIDED TOUR
    introJs().setOptions({
      steps:[
              {
                element: document.querySelector('#users-table'),
                intro: 'All users are visible here.'
              },
              {
                element: document.querySelector('#users-add-button'),
                intro: 'Click here to create a new user.'
              },
              {
                element: document.querySelector('#download-users-table-button'),
                intro: 'Click here to download all users into a .xls file.'
              },
              {
                element: document.querySelector('.records-btn'),
                intro: 'Click here to go to the Records tab.'
              },
              {
                element: document.querySelector('.intro-btn'),
                intro: 'Click here to return to the Welcome page.'
              }
            ],
            dontShowAgain: true,
    }).start();
  </script>
</html>
